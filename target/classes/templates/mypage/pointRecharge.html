<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>포인트 충전</title>

    <style>
        body {
            background-color: #333; /* 연한 검정색 배경 */
            color: #FFF; /* 글자색 흰색으로 변경 */
            font-family: Arial, sans-serif; /* 원하는 폰트로 변경 */
        }

        h1 {
            text-align: center; /* 헤더 가운데 정렬 */
            padding: 20px; /* 헤더 상하 패딩 추가 */
            background-color: #444; /* 헤더 배경색 */
        }

        form {
            text-align: center; /* 폼 가운데 정렬 */
        }

        /* 입력 필드와 오류 메시지 스타일 */
        input[type="number"] {
            padding: 5px;
            border: 1px solid #777;
        }

        span#errorMessage {
            color: red;
        }

        /* 버튼 스타일 */
        button {
            padding: 10px 20px; /* 버튼 내용 주위의 여백 설정 */
            margin: 10px; /* 버튼 사이 여백 설정 */
            background-color: #FF5733; /* 버튼 배경색 설정 */
            color: #FFF; /* 버튼 글자색 설정 */
            border: none; /* 버튼 테두리 없애기 */
            cursor: pointer; /* 포인터 커서 설정 */
        }

        button:hover {
            background-color: #E04324; /* 마우스 호버시 배경색 변경 */
        }

        button[type="submit"] {
            background-color: #33FF77; /* 충전 버튼 배경색 설정 */
        }

        button[type="submit"]:hover {
            background-color: #24E05A; /* 충전 버튼 마우스 호버시 배경색 변경 */
        }

        /* 텍스트 입력칸 스타일 */
        .text-input {
            width: 60%;
            max-width: 200px; /* 텍스트 입력칸 최대 너비 설정 */
            padding: 10px;
            margin-right: 10px; /* 입력칸 오른쪽 여백 추가 */
            border: 1px solid #777;
        }

        /* "보유머니: xx 포인트" 글자 크기 1.5배로 키우기 */
        .welcome-message {
            font-size: 1.5em;
        }
    </style>

    <script>
        function validateForm() {
            var depositAmountField = document.getElementById("depositAmountField");
            var depositAmountError = document.getElementById("depositAmountError");

            // 입력값이 비어 있는지 확인
            if (depositAmountField.value.trim() === "") {
                depositAmountError.textContent = "포인트를 입력하세요";
                return false; // 폼 제출 중지
            }

            var maxValue = 10000000000;
            var inputValue = parseInt(depositAmountField.value, 10);
            if (inputValue > maxValue) {
                depositAmountError.textContent = "최대 100억까지 가능합니다";
                return false; // 폼 제출 중지
            } else if (inputValue === maxValue) {
                depositAmountError.textContent = "최대 100억까지 가능합니다"; // 최대값과 같을 때 경고 메시지
                return false; // 폼 제출 중지
            }

            // 유효성 검사를 통과하면 오류 메시지 삭제
            depositAmountError.textContent = "";
            return true; // 폼 제출 허용
        }
    </script>
</head>
<body>
<h1>포인트 충전</h1>
<form method="POST" th:action="@{/mypage/recharge}" onsubmit="return validateForm()">
    <input type="hidden" name="uid" th:value="${session.user}">
    <span style="color: orange;" th:text="${session.user}"></span><span class="welcome-message">님 반갑습니다</span>
    <br><br> <!-- 줄 바꿈 추가 -->

    <!-- "포인트" 빨간색으로 표시 -->
    <span th:text="'보유 머니: '" class="point-label"></span>
    <span style="color: red;" th:text="${#numbers.formatInteger(userDto.point, 3, 'COMMA') + ' 포인트'}"></span>
    <br><br> <!-- 줄 바꿈 추가 -->

    <!-- 텍스트 입력칸과 "충전" 버튼을 한 줄에 배치 -->
    <input type="number" name="depositAmount" min="0" id="depositAmountField" class="text-input">
    <button type="submit">충전</button>
    <br><br> <!-- 줄 바꿈 추가 -->

    <!-- "출금하기"와 "룰렛하러 가기" 버튼 -->
    <button type="button" onclick="location.href='/mypage/withdrawPage'">출금하기</button>
    <button type="button" onclick="location.href='/minigame2/roulette'">룰렛하러 가기</button>
    <br><br> <!-- 줄 바꿈 추가 -->

    <!-- 오류 메시지 -->
    <span id="depositAmountError" style="color: red;"></span>
</form>
</body>
</html>